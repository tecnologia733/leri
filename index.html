<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>ü§∞Calculadora Gestacional</title>
  <style>
    body { font-family: sans-serif; background: #fef6f9; padding: 2rem; line-height: 1.6; color: #333; }
    h1 { color: #c71585; }
    .section { margin-bottom: 2rem; }
  </style>
</head>
<body>
  <h1>Ol√° Lerinha, meu amor!</h1>

  <div class="section" id="gestacao">
    <p>Contagem baseada na DUM (20/02/2025): <strong><span id="dumSemanas"></span></strong></p>
    <p>Contagem baseada no ultrassom (23/04/2025): <strong><span id="usgSemanas"></span></strong></p>
    <p>DPP (DUM): <strong>26/11/2025</strong> | DPP (Ultrassom): <strong>31/10/2025</strong></p>
  </div>

  <div class="section">
    <h2>Vers√≠culo do Dia</h2>
    <blockquote id="versiculo">Carregando vers√≠culo...</blockquote>
  </div>

  <div class="section">
    <h2>Semana Atual ‚Äì Cuidados e Desenvolvimento</h2>
    <div id="infoSemana">Carregando...</div>
  </div>

  <script>
    const HOJE = new Date('2025-06-26');

    function calcSemanasDias(inicio) {
      const diff = HOJE - new Date(inicio);
      const dias = Math.floor(diff / (1000 * 60 * 60 * 24));
      const semanas = Math.floor(dias / 7);
      const resto = dias % 7;
      return `${semanas} semanas e ${resto} dias`;
    }

    document.getElementById("dumSemanas").innerText = calcSemanasDias("2025-02-20");
    document.getElementById("usgSemanas").innerText = calcSemanasDias("2025-01-31"); // retrocedendo 12s4d antes de 23/04/2025

    // Vers√≠culo via backend
    fetch('/versiculo')
      .then(res => res.json())
      .then(data => {
        document.getElementById('versiculo').innerText = `"${data.texto}" ‚Äî ${data.referencia}`;
      });

    // Info semana
    const semanaAtual = Math.floor((HOJE - new Date("2025-02-20")) / (1000 * 60 * 60 * 24 * 7));
    fetch('/data/gravidez.json')
      .then(res => res.json())
      .then(json => {
        const info = json[semanaAtual];
        document.getElementById("infoSemana").innerHTML = `
          <h3>${info.titulo}</h3>
          <p><strong>Descri√ß√£o:</strong> ${info.descricao}</p>
          <p><strong>Cuidados:</strong> ${info.cuidados}</p>
        `;
      });
  </script>
</body>
</html>
