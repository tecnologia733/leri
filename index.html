<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>🤰 Calculadora Gestacional de Lerinha 💕</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="apple-touch-icon" href="favicon.png" />
  <meta name="theme-color" content="#fff0f5" />
  <link rel="manifest" href="manifest.json" />
  <style>
    body {
      background: #fffdfc;
      color: #333;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Color Emoji", "Apple Color Emoji", "Roboto", sans-serif;
      padding: 2rem;
      max-width: 800px;
      margin: auto;
      padding-bottom: 7rem;
    }
    h1 {
      color: #c2185b;
      font-size: 2rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }
    .section {
      margin-bottom: 2rem;
      background: #fff0f5;
      border-left: 5px solid #c2185b;
      padding: 1rem;
      border-radius: 6px;
    }
    .icone {
      font-size: 1.3rem;
      margin-right: 0.4rem;
    }
    button {
      font-size: 0.9rem;
      margin-left: 8px;
      padding: 2px 6px;
      border: none;
      border-radius: 4px;
      background-color: #ffe3ed;
      cursor: pointer;
    }
    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #fff0f5;
      text-align: center;
      padding: 0.6rem;
      font-size: 0.9rem;
      color: #555;
      border-top: 1px solid #ddd;
      box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.05);
    }
    .heartbeat {
      display: inline-block;
      animation: pulse 1.4s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.18); }
      100% { transform: scale(1); }
    }
    @media (max-width: 600px) {
      h1 { font-size: 1.5rem; }
      .section { font-size: 0.95rem; padding: 1rem; }
      button { margin-top: 6px; display: inline-block; }
      footer { font-size: 0.8rem; padding: 0.5rem 0.3rem; }
    }
    span[id$="Idade"] {
      font-weight: bold;
      font-size: 1.05rem;
    }
  </style>
</head>
<body>

<h1>🤰 Calculadora Gestacional de Lerinha 💕</h1>

<div class="section">
  <h2>🩷 Acompanhamento pela DUM (20/02/2025)</h2>
  <p><span class="icone">📅</span><strong>Idade Gestacional:</strong>
    <span id="dumIdade"></span>
    <button type="button" onclick="alternarDUM()">↔️</button>
  </p>
  <p><span class="icone">📆</span><strong>DPP:</strong> 26/11/2025</p>
  <p><span class="icone">⏰</span><strong>Dias restantes:</strong> <span id="dumDiasRestantes"></span></p>
  <p><span class="icone">📊</span><strong>Trimestre:</strong> <span id="dumTrimestre"></span></p>
  <p><span class="icone">ℹ️</span><em id="dumTrimestreInfo"></em></p>
  <p><span class="icone">👶</span><strong>Desenvolvimento:</strong> <em id="dumDesenvolvimento"></em></p>
  <p><span class="icone">🧬</span><strong>Detalhes Científicos:</strong> <em id="dumCientifico"></em></p>
  <p><span class="icone">❤️</span><strong>Cuidados:</strong> <em id="dumCuidados"></em></p>
</div>

<div class="section">
  <h2>💜 Acompanhamento por Ultrassom (23/04/2025)</h2>
  <p><span class="icone">📅</span><strong>Idade Gestacional:</strong>
    <span id="usgIdade"></span>
    <button type="button" onclick="alternarUSG()">↔️</button>
  </p>
  <p><span class="icone">📆</span><strong>DPP:</strong> 31/10/2025</p>
  <p><span class="icone">⏰</span><strong>Dias restantes:</strong> <span id="usgDiasRestantes"></span></p>
  <p><span class="icone">📊</span><strong>Trimestre:</strong> <span id="usgTrimestre"></span></p>
  <p><span class="icone">ℹ️</span><em id="usgTrimestreInfo"></em></p>
  <p><span class="icone">👶</span><strong>Desenvolvimento:</strong> <em id="usgDesenvolvimento"></em></p>
  <p><span class="icone">🧬</span><strong>Detalhes Científicos:</strong> <em id="usgCientifico"></em></p>
  <p><span class="icone">❤️</span><strong>Cuidados:</strong> <em id="usgCuidados"></em></p>
</div>

<footer>
  <p>
    🎁 <a href="https://www.mercadolivre.com.br/presentes/cha-de-bebe-krlud" target="_blank" style="color:#c2185b;text-decoration:none;"><strong>Lista de Chá de Bebê</strong></a>
  </p>
  <p>
    Feito com <span class="heartbeat">❤️</span> pelo esposo <strong>Roberto</strong> ·
    <a href="https://tecinova.top/" target="_blank" style="text-decoration:none;color:#c2185b;">tecinova.top</a> ·
    <a href="https://wa.me/5511916698212" target="_blank" style="text-decoration:none;color:#25D366;">WhatsApp</a>
  </p>
</footer>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const HOJE = new Date();

  function calcGestacao(dataInicio) {
    const inicio = new Date(dataInicio);
    const dias = Math.floor((HOJE - inicio) / (1000 * 60 * 60 * 24));
    const semanas = Math.floor(dias / 7);
    const resto = dias % 7;
    const meses = (semanas / 4.345).toFixed(1);
    return { dias, semanas, resto, meses };
  }

  const gravidez = {
    "1": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Fase de implantação e início da formação embrionária.",
      desenvolvimento: "O óvulo foi fecundado e começa a se dividir.",
      cientifico: "Zigoto se fixa na parede do útero. Início da produção hormonal.",
      cuidados: "Evite álcool, comece a suplementação de ácido fólico."
    },
    "2": {
      trimestre: "1º Trimestre",
      trimestreInfo: "O embrião começa a se formar rapidamente.",
      desenvolvimento: "Desenvolvimento do tubo neural e coração inicia batimentos.",
      cientifico: "Embrião com 2-4 mm. Início de estrutura da placenta.",
      cuidados: "Durma bem, mantenha alimentação leve e equilibrada."
    },
    "3": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Formação do tubo neural e sistemas básicos.",
      desenvolvimento: "O coração começa a bater. Início da formação da placenta.",
      cientifico: "Embrião mede 1-2 mm. Células se organizam rapidamente.",
      cuidados: "Consulte um obstetra, continue com ácido fólico."
    },
    "4": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Formação inicial dos órgãos e estruturas neurais.",
      desenvolvimento: "Sistema digestivo começa a se formar.",
      cientifico: "Embrião tem 4-6 mm. Início da diferenciação celular.",
      cuidados: "Evite estresse, mantenha alimentação saudável."
    },
    "5": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Início da formação de cabeça, braços e pernas.",
      desenvolvimento: "Coração bate forte, olhos começam a surgir.",
      cientifico: "Embrião mede cerca de 8 mm.",
      cuidados: "Faça o pré-natal, mantenha boas noites de sono."
    },
    "6": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Sistema nervoso evolui. Nariz e ouvidos se formam.",
      desenvolvimento: "Embrião se move, embora imperceptível.",
      cientifico: "Cerca de 1,2 cm e com frequência cardíaca detectável.",
      cuidados: "Evite esforços físicos intensos e bebidas com cafeína."
    },
    "7": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Face e cérebro em desenvolvimento acelerado.",
      desenvolvimento: "Pequenas mãos e pés já se formam.",
      cientifico: "Cerca de 1,8 cm. Começo da formação dos rins.",
      cuidados: "Evite medicamentos sem orientação médica."
    },
    "8": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Embrião começa a parecer um pequeno ser humano.",
      desenvolvimento: "Formação do maxilar, pálpebras e orelhas.",
      cientifico: "Cerca de 2 cm. Sistema respiratório inicia estrutura.",
      cuidados: "Mantenha hidratação e faça exames indicados."
    },
    "9": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Final da fase embrionária. Agora é um feto!",
      desenvolvimento: "Crescimento acelerado e movimentos leves.",
      cientifico: "Cerca de 3 cm. Órgãos principais estão presentes.",
      cuidados: "Siga plano alimentar e fale com obstetra regularmente."
    },
    "10": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Diminuição do risco de aborto espontâneo.",
      desenvolvimento: "Dedos separados e unhas começam a surgir.",
      cientifico: "Aproximadamente 4 cm. Feto já faz pequenos movimentos.",
      cuidados: "Evite locais com muita fumaça ou poluição."
    },
    "11": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Pele fina e transparente. Músculos em formação.",
      desenvolvimento: "Começa a sugar o dedo dentro do útero.",
      cientifico: "Aproximadamente 5 cm e pesando cerca de 10g.",
      cuidados: "Inicie planos para ultrassom e exames genéticos se necessário."
    },
    "12": {
      trimestre: "1º Trimestre",
      trimestreInfo: "Início da formação dos órgãos sexuais externos.",
      desenvolvimento: "Rosto já delineado. Movimentos mais coordenados.",
      cientifico: "Mede 6-7 cm. Rim começa a funcionar.",
      cuidados: "Evite saltos, use roupas confortáveis e folgadas."
    }
    // ... Continuando as semanas
    "13": {
      trimestre: "2º Trimestre",
      trimestreInfo: "Início da fase mais tranquila da gestação.",
      desenvolvimento: "Movimentos visíveis no ultrassom, rosto mais definido.",
      cientifico: "Cerca de 7-8 cm. Rim começa a produzir urina fetal.",
      cuidados: "Caminhadas leves e alimentação rica em ferro são ideais."
    },
    // (...)
    "40": {
      trimestre: "3º Trimestre",
      trimestreInfo: "Últimos dias! Bebê está pronto para nascer.",
      desenvolvimento: "Peso ideal atingido, posição adequada para parto.",
      cientifico: "Cerca de 50 cm e mais de 3 kg.",
      cuidados: "Tenha a mala da maternidade pronta e siga orientações médicas."
    }
  };

  const dum = calcGestacao("2025-02-20");
  const usg = calcGestacao("2025-01-31");

  let modoDUM = "semanas";
  let modoUSG = "semanas";

  function formatar(g, modo) {
    return modo === "semanas"
      ? `${g.semanas} semanas e ${g.resto} dias`
      : `${g.meses} meses (aproximadamente)`;
  }

  window.alternarDUM = () => {
    modoDUM = modoDUM === "semanas" ? "meses" : "semanas";
    renderizar();
  };

  window.alternarUSG = () => {
    modoUSG = modoUSG === "semanas" ? "meses" : "semanas";
    renderizar();
  };

  function renderizar() {
    function renderBase(prefixo, dados) {
      document.getElementById(`${prefixo}Idade`).innerText = formatar(dados, prefixo === "dum" ? modoDUM : modoUSG);
      document.getElementById(`${prefixo}DiasRestantes`).innerText = `${280 - dados.dias} dias`;

      const semana = gravidez[dados.semanas] || {};
      document.getElementById(`${prefixo}Trimestre`).innerText = semana.trimestre || "";
      document.getElementById(`${prefixo}TrimestreInfo`).innerText = semana.trimestreInfo || "";
      document.getElementById(`${prefixo}Desenvolvimento`).innerText = semana.desenvolvimento || "";
      document.getElementById(`${prefixo}Cientifico`).innerText = semana.cientifico || "";
      document.getElementById(`${prefixo}Cuidados`).innerText = semana.cuidados || "";
    }

    renderBase("dum", dum);
    renderBase("usg", usg);
  }

  // 🔔 Notificação semanal
  if ("Notification" in window && Notification.permission !== "denied") {
    Notification.requestPermission().then(permission => {
      if (permission === "granted") {
        const title = `👶 Atualização de semana da Lerinha`;
        const options = {
          body: `Hoje a gestação chegou a ${dum.semanas} semanas!`,
          icon: "favicon.png"
        };
        new Notification(title, options);
      }
    });
  }

  // 🧩 Registrar service worker
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js").then(() => {
      console.log("✔️ Service worker registrado com sucesso!");
    }).catch(e => {
      console.warn("⚠️ Falha ao registrar o service worker", e);
    });
  }

  renderizar();
});
</script>

</body>
</html>
